## PHP 学习指南

文/韩天峰

>PHP 简单易学，拥有完整的生态系统，是最流行的 Web 开发技术之一。本文以 CSDN PHP 知识库为基础，分享了 PHP 发展历史及重要特点，尤其梳理了 PHP 各个核心技术要点，帮助开发者查漏补缺，完善自己的知识体系。

PHP（PHP：Hypertext Preprocessor，即“超文本预处理器”）是一种通用开源脚本语言。语法吸收了 C、Java 和 Perl 的特点，简单易学，使用方便，主要适用于 Web 开发。

PHP 于1994年由 Rasmus Lerdorf 创建，PHP 使用 C 语言编写，内置处理 HTTP GET/POST 请求、表单处理、访问数据库等功能，可以很简单地编写动态网页程序。到了1996年底，有15000个网站使用 PHP，从此建立了 PHP 在 Web 开发领域的地位。

### PHP 的历史

#### PHP1

PHP 最初是作为一个快速、实用的工具包出现的。1994年，为了在自己的网站上增加一个小巧而实用的访客追踪系统，Rasmus Lerdorf 编写了 PHP 的雏形程序。这是一个用 Perl 封装的简单工具。由于使用效果并不理想，Rasmus 又用 C 语言重写了这个工具。

后来，更多人注意到这个轻巧而简便的程序，并且要求增加更多的功能。Rasmus 决定发布一个完整的版本，将其命名为 Personal Home Page Tools。后来，Rasmus 又发布了一个名为 FI 的可以做 SQL 查询的工具。

#### PHP2

1996年 Rasmus 发布了 PHP/FI2.0，这是一个基本完善的 PHP 程序包。不仅可以访问数据库，而且可以嵌入 HTML 页面。此时，PHP/FI2.0 已经吸引了大量程序开发人员。在众多程序员之中，也包括了 Zeev Suraski 和 Andi Gutmans，他们就是后来 PHP3 的始作者。由于不满足于 PHP/FI 在大型项目中的表现，Zeev 和 Andi 对 PHP 作了重大改进。

#### PHP3

在1997年，任职于 Technion IIT 公司的两个以色列程序设计师 Zeev Suraski 和 Andi Gutmans，重写了 PHP 解析器，并在1998年6月正式发布 PHP3。

PHP3 的第一个官方正式版本发行，其特色是具有更好的执行效果以及更清晰的结构。除此之外，PHP3 强大的功能还在于它的可扩展性。除了给最终用户提供数据库、协议和 API 的基础结构，它的可扩展性吸引了大量的开发人员加入并提交新的模块。

这个全新的语言伴随着一个新的名称发布。这个名称更具广泛意义，而不仅局限于“个人主页工具”的概念。它被命名为简单的缩写“PHP”。这是一种递归缩写，全称是——PHP：Hypertext Preprocessor。

不久，Zeev Suraski 和 Andi Gutmans 也在以色列的 Ramat Gan 成立了 Zend 公司来管理 PHP 的开发，并投入到了全新的 PHP 解析器开发之中。设计目标是增强程序运行性能和 PHP 自身代码的模块性。这个新的 PHP 解析器就是 Zend 引擎。

#### PHP4

新的PHP核心被称为“Zend”（以 Zeev 和 Andi 的名字命名）引擎，于2000年5月随着新版 PHP4 发布。PHP4 的性能较 PHP3 有了显著的提高。相同的脚本在 PHP4 中运行，最高可以有近10倍的性能提升。并且 Zend 提供了脚本优化器，可以把源程序转为二进制编译代码，提高性能的同时，也保护了程序源码不被暴露。

在 PHP4 中增加了对各种 Web 服务器（如 Apache、IIS/PWS 等）的支持。此外，PHP4 还增加了一些新的语言特性，如丰富的数组操作函数、完整的会话机制、对输出缓存的支持等。PHP4 也对一些跨平台的技术提供了扩展支持，如对 Adobe PDF、SWF、Java、Microsoft.NET 等技术的支持。

PHP4 还增加了对类、对象的支持。尽管 PHP4 在这方面并不完善，但还是大大改善了对面向对象程序设计的支持。PHP4 中的 Pear 库（PHP Extension and Application Repository）就是面向对象应用与实践的最好例证。

#### PHP5

尽管 PHP4 的发展如此迅猛，但较之于其他流行的开发语言还是缺乏一些关键的功能特性，比如，PHP4 中的面向对象功能并不完善，也无法实现异常（Exception）的捕捉与处理。因此在一些特殊问题的处理上还是捉襟见肘。

2004年7月，PHP5 正式版本的发布，标志着一个全新 PHP 时代的到来。它的核心是第二代 Zend 引擎，并引入了对全新 PECL 模块的支持。PHP5 的最大特点是引入了面向对象的全部机制，并且保留了向下的兼容性。程序员不必再编写缺乏功能的类，并且能够以多种方法实现类的保护。另外，在对象的集成等方面也不再存在问题。使用 PHP5 引进了类型提示和异常处理机制，能更有效地处理和避免错误的发生。

#### PHP5.3～PHP5.6

PHP5.3～PHP5.6实际上这个阶段的版本应该算是 PHP6 的部分。PHP5.3 最早的版本发布于2007年，这个版本最大的变化是增加了对命名空间的支持。之前版本的 PHP 没有任何包管理措施，广为用户所诟病，新的 PHP5.3 解决了此问题。而后面的 PHP5.4、PHP5.5、PHP5.6 又相继增加了匿名函数、闭包、Traits、短数组、Yield 与生成器语法、函数自动变长参数等新特性，使得 PHP 与其他现代编程语言如 Java、C# 一样强大。新版本还持续对性能做了优化，从5.4到5.5、5.6，PHP 语言的性能得到了大幅提升。

#### PHP7

随着 PHP 的发展，越来越多的企业使用 PHP，更多的人开始关注 PHP 语言的性能问题。Facebook 在线上项目中大量使用PHP，2008年开发了一个新的PHP引擎，名为 HipHop，它可以将 PHP 代码转成 C++，以提高性能和节约资源。在2010年初，Facebook 又开发了HipHop的升级版本 HHVM，新的 HHVM 引擎内置了 JIT（Just-In-Time）支持，HHVM 将 PHP 代码编译为机器码执行，以使 PHP 程序性能提升数倍。

同时 PHP 社区也注意到了这个问题，开始重新设计 Zend 引擎，提升 PHP 的性能。并于2015年6月正式发布PHP7第一版。新的 PHP 引擎性能比 PHP5.6 提升了数倍，在实际项目中 PHP7 的性能像 HHVM 一样快。另外 PHP 官方开发组也在开发 PHP JIT，下一个 PHP7 版本即将内置 JIT。PHP 的性能将越来越接近 Java、C++ 等静态编译语言。

### PHP 语言的特点

#### 简单易用

PHP 语言最大的特点就是简单易用，它对与开发者隐藏了类型转换、内存管理、指针、数据结构算法、服务器通信过程等底层实现，开发者无需关注任何底层的实现原理，实现程序逻辑即可。PHP 无需编译即可直接执行，编写完程序后即可通过浏览器访问看到结果。

PHP 程序在请求处理完毕后会释放全部内存资源，因此不存在令开发者头疼的内存泄漏问题。PHP 提供了友好的错误信息展示，开发者只需观察错误信息就可以解决程序问题。

PHP 程序开发和运行环境容易搭建，对新手非常友好，使用 LAMP 套件一键安装即可完成。不需要特别复杂的安装配置过程，程序员就可以快速投入 Web 网站程序的开发，实现想要的功能。

#### 功能强大

PHP 语法特性丰富，面向对象、面向过程、闭包、命名空间与类自动载入、SPL、Yield/Generator、Reflection 等，现代编程语言特性应有尽有。

PHP 语言的标准库非常强大，内置了丰富的函数库。开发者在编程过程中不需要自行查找第三方库。另外 PHP 自带了常用的扩展，比如 MySQL、GD、JSON、XML、DateTime、CURL、Sockets、Stream、File 等。除此之外 PHP 官方的 PECL （扩展库）和 Pear（PHP 代码库）提供了丰富的扩展功能。

而许多其他编程语言如 Java、C#、JavaScript 等需要额外下载安装大量第三方类库才能进行编程开发工作。

#### 强大的生态圈

PHP 语言的生态圈强大，在 Stack Overflow、GitHub 上可以找到很 多PHP 问题的解决方案以及现成的代码和功能类库。

PHP 在 Web 网站方面有大量直接可用的免费开源项目，包括 CMS （内容管理）、相册、博客、论坛、电子商城、SNS、问答、WIKI、门户网站平台等程序。

### PHP 知识库分类

#### 开发环境

介绍 PHP 在 Windows、Linux 等平台，搭建 PHP 的开发运行环境，包括：

- Apache、Nginx、MySQL、PHP-FPM 安装和配置；

- PHP 集成开发环境和编码工具的安装和使用，如 PhpStorm、Sublime Text、Atom 等；

- PHP 工具的使用，如 PHP-CLI、phpinfo、phpMyAdmin、Composer、PEAR、PECL。

#### 基础知识

PHP 的语法，包括类型、变量、常量、分支与循环、数组、字符串、函数、类和对象、异常等，以及一些基本函数的使用，包括 Array、String、正则表达式等的使用。学习了这些知识后，就可以开始使用 PHP 编写逻辑了。

#### 常用扩展

PHP 开发程序常用扩展的使用，包括 MySQL、CURL、GD、MongoDB、Memcached、Redis、文件操作、其他数据库（Oracle、SQLServer、SQLite、PHP+PostgreSQL）。掌握了常用扩展的使用，就可以开始使用 PHP 开发一些 Web 后台功能了。

#### Web 开发

这部分主要是使用 PHP 进行 Web 项目开发实战，在使用 PHP 开发后台功能时，需要解决各类问题。比如配置 PHP-FPM、Apache、Nginx，创建虚拟主机。处理 GET/POST 表单、HTTP 会话、网站安全，如防止 SQL 注入和 XSS 攻击、上传图片、HTTP 跳转等。

#### 系统架构

这部分属于 PHP 后台程序系统架构设计，包括 Nginx、PHP-FPM、队列服务、Cache、集群化、Key-Value 存储、MySQL 读写分离等内容。

#### 系统编程

进阶部分，使用 PHP 开发守护进程，实现爬虫、脚本程序、网络服务器等程序。

#### Zend 内核

高级部分，介绍 PHP 底层的 Zend VM 源码分析、运行和实现原理。

### PHP 知识节点

#### 语法基础

PHP 的语法基础，如语法关键词、变量、数据类型、常量、字符串、数组、函数、类和对象、异常等。以及 PHP 程序文件如何执行，echo 输出内容，程序代码文件组织。 

#### Array

PHP 的数字索引数组和关联索引数组使用，以及 Array 系列函数的使用，实现数组查找、排序、遍历、随机乱序等功能。

#### String 字符串

PHP的字符串使用，以及 Str 相关函数的使用。实现字符串拼接、截取、替换、分割、合并等功能。

#### 正则表达式

PHP 正则表达式使用，实现正则查找替换、邮箱手机号码姓名等验证。

#### Form 处理

实现 GET/POST 数据处理、文件上传。

#### 面向对象

PHP 的面向对象设计和编程，设计模式的使用。

#### MySQL

使用 PHP 操作 MySQL 数据库，实现数据的增加、删除、查找、修改。

#### CURL

使用 CURL、file_get_contents 发起 HTTP 网络请求，得到页面内容。

#### Redis

使用 PHP 操作 Redis 实现 Key-Value、HashMap、Set、zset （有序集合）的读写操作，

#### Memcached

使用 PHP 操作 Memcached，缓存数据库的结构，提升性能。

#### File

使用 PHP 实现文件读写、删除、目录创建、遍历等文件系统操作。

#### GD

使用 PHP 实现验证码生成、图片裁剪压缩、加水印等功能。

#### JSON

使用 PHP 对 JSON 格式数据解包和打包。

#### 性能优化

使用 Xdebug、Xhprof 等工具进行 PHP 程序性能优化。
